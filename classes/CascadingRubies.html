<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: CascadingRubies [CascadingRubies]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          CascadingRubies
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/lib/cascading_rubies_rb.html">lib/cascading_rubies.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>BlankSlate</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000005">css</a></li>
              <li><a href="#M000001">new</a></li>
              <li><a href="#M000004">open</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000002">s</a></li>
              <li><a href="#M000003">to_s</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TAGS</td>
                    <td>=</td>
                    <td class='context-item-value'>%w(a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dir div dfn dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map meta noframes noscript object ol optgroup option p param pre q samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var xmp)</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      List of tags taken from <a
                      href="http://www.w3schools.com/tags/default.asp">www.w3schools.com/tags/default.asp</a>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000005'>
                <a name='M000005'>      </a>
                <div class='synopsis'>
                  <span class='name'>css</span>
                  <span class='arguments'>(code=nil, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Wraps the creation of a <a href="CascadingRubies.html">CascadingRubies</a>
                  object and doing the instance_eval execution in a neat package for use
                  inside rcss files. An rcss file can use the optional block syntax to wrap
                  style definitions, allowing code to be run outside the instance_eval
                  confines. Use this method in an .rcss file like so:
                  </p>
                  <pre>css do&#x000A;  a { color :red }&#x000A;end</pre>
                  <p>
                  or:
                  </p>
                  <pre>CascadingRubies.css do&#x000A;  a { color :red }&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000005-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000005-source'><span class="ruby-comment cmt"># File lib/cascading_rubies.rb, line 116</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">css</span>(<span class="ruby-identifier">code</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-ivar">@obj</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">code</span>&#x000A;      <span class="ruby-ivar">@obj</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-identifier">code</span>)&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-ivar">@obj</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000001'>
                <a name='M000001'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(context_name=nil, selectors=[], classed=false, &amp;dsl_code)</span>
                </div>
                <div class='description'>
                  <p>
                  Creates a <a href="CascadingRubies.html">CascadingRubies</a> object.
                  Normally, you should not pass in any arguments, except a block of style
                  definitions. The block can optionally take a single argument &#8212; if so,
                  the newly created object is yielded to the block, and instance_eval is not
                  used.
                  </p>
                  <p>
                  Each block in the style definitions is effectively going to trigger a new
                  object to be created, so the block argument is optional <em>for each
                  block</em>, and the determination to use instance_eval is subsequently
                  <em>per block</em>:
                  </p>
                  <pre>CascadingRubies.new do |css|&#x000A;  css.header do |header|&#x000A;    header.background_color '#ccc'&#x000A;  end&#x000A;  css.p {&#x000A;    margin_bottom '15px'&#x000A;  }&#x000A;end</pre>
                  <p>
                  If you do not pass a block (or even if you do), you can execute additional
                  style definitions by either calling methods directly on the object:
                  </p>
                  <pre>obj = CascadingRubies.new&#x000A;obj.nav { margin '10px'; a { color :red } }</pre>
                  <p>
                  or you can instance_eval another block of code:
                  </p>
                  <pre>obj.instance_eval do&#x000A;  p { margin_bottom '15px' }&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000001-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000001-source'><span class="ruby-comment cmt"># File lib/cascading_rubies.rb, line 40</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">context_name</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">selectors</span>=[], <span class="ruby-identifier">classed</span>=<span class="ruby-keyword kw">false</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">dsl_code</span>)&#x000A;    <span class="ruby-ivar">@__context_name</span> = <span class="ruby-identifier">context_name</span>&#x000A;    <span class="ruby-ivar">@__css</span> = <span class="ruby-value str">''</span>&#x000A;    <span class="ruby-ivar">@__selectors</span> = <span class="ruby-identifier">selectors</span>&#x000A;    <span class="ruby-ivar">@__classed</span> = <span class="ruby-identifier">classed</span> <span class="ruby-comment cmt"># if true, method_missing calls are css class selectors -- not id selectors</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dsl_code</span>.<span class="ruby-identifier">nil?</span>&#x000A;      <span class="ruby-comment cmt"># do nothing</span>&#x000A;    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">dsl_code</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-identifier">dsl_code</span>[<span class="ruby-keyword kw">self</span>]&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">dsl_code</span>)&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000004'>
                <a name='M000004'>      </a>
                <div class='synopsis'>
                  <span class='name'>open</span>
                  <span class='arguments'>(path)</span>
                </div>
                <div class='description'>
                  <p>
                  Creates a <a href="CascadingRubies.html">CascadingRubies</a> object, then
                  opens the file and executes the style definitions in the context of the
                  object. Returns the newly created object.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000004-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000004-source'><span class="ruby-comment cmt"># File lib/cascading_rubies.rb, line 96</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>)&#x000A;    <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">code</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>)) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^css do|CascadingRubies\.css do/</span>&#x000A;      <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">code</span>)&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-identifier">css</span>(<span class="ruby-identifier">code</span>)&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-ivar">@obj</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000002'>
                <a name='M000002'>      </a>
                <div class='synopsis'>
                  <span class='name'>s</span>
                  <span class='arguments'>(selector, *args, &amp;dsl_code)</span>
                </div>
                <div class='description'>
                  <p>
                  Create a new style &#8220;selector&#8221; without going through
                  method_missing. Use this to create style definitions that cannot be created
                  with the DSL directly, e.g.
                  </p>
                  <ul>
                  <li><tt>s('#<a href="CascadingRubies.html#M000002">s</a>') { color :blue }</tt>
                  => <tt>#<a href="CascadingRubies.html#M000002">s</a> { color: blue; }</tt>
                  
                  </li>
                  <li><tt>s('div#search') { margin 0 }</tt> => <tt>div#search { margin: 0; }</tt>
                  
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000002-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000002-source'><span class="ruby-comment cmt"># File lib/cascading_rubies.rb, line 58</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">s</span>(<span class="ruby-identifier">selector</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">dsl_code</span>)&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">dsl_code</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-comment cmt"># css rule</span>&#x000A;      <span class="ruby-ivar">@__css</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{selector}: #{args.join(' ')}; &quot;</span>&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">dsl_code</span> <span class="ruby-comment cmt"># pseudo-class selector</span>&#x000A;        <span class="ruby-identifier">selector_name</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>&#x000A;          [[<span class="ruby-ivar">@__context_name</span>, <span class="ruby-identifier">selector</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>), <span class="ruby-value str">':'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">''</span>)&#x000A;        <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)&#x000A;      <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># regular selector</span>&#x000A;        <span class="ruby-identifier">selector_name</span> = [<span class="ruby-ivar">@__context_name</span>, <span class="ruby-identifier">selector</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@__classed</span> <span class="ruby-operator">?</span> <span class="ruby-value str">''</span> <span class="ruby-operator">:</span> <span class="ruby-value str">' '</span>)&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@__bare</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@__bare</span>.<span class="ruby-identifier">__has_children</span> <span class="ruby-comment cmt"># e.g. li; a { }</span>&#x000A;        <span class="ruby-identifier">selector_name</span> = <span class="ruby-node">&quot;#{@__bare.__context_name}, #{selector_name}&quot;</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dsl_code</span>&#x000A;        <span class="ruby-identifier">compiled</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">selector_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">dsl_code</span>)&#x000A;        <span class="ruby-ivar">@__selectors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{selector_name} { #{compiled.__css}}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">compiled</span>.<span class="ruby-identifier">__css</span>.<span class="ruby-identifier">empty?</span>&#x000A;        <span class="ruby-ivar">@__selectors</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">compiled</span>.<span class="ruby-identifier">__selectors</span>&#x000A;        <span class="ruby-ivar">@__bare</span> = <span class="ruby-keyword kw">nil</span>&#x000A;      <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># e.g. div.something</span>&#x000A;        <span class="ruby-ivar">@__bare</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">selector_name</span>, <span class="ruby-ivar">@__selectors</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">dsl_code</span>)&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000003'>
                <a name='M000003'>      </a>
                <div class='synopsis'>
                  <span class='name'>to_s</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the complete CSS style definitions as a string.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000003-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000003-source'><span class="ruby-comment cmt"># File lib/cascading_rubies.rb, line 90</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>&#x000A;    <span class="ruby-ivar">@__selectors</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
